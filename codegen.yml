overwrite: true

hooks:
  afterAllFileWrite:
    - prettier --write

schema: apps/server/src/graphql/**/*.graphql

documents: apps/web/src/**/*.graphql

generates:
  apps/server/src/graphql/resolvers-types.generated.ts:
    config:
      mapperTypeSuffix: Entity
      mappers:
        Author: ../database/entity#Author
        Avatar: ../database/entity#Avatar
        Book: ../database/entity#Book
        BookCopy: ../database/entity#BookCopy
        User: ../database/entity#User
        CurrentUser: ../database/entity#User
      showUnusedMappers: true
      scalars:
        ExternalID: string
      optionalResolveType: true
    plugins:
      - typescript
      - typescript-resolvers

  apps/fake-server/src/schema.json:
    plugins:
      - introspection

  apps/web/src/introspectionResult.generated.ts:
    plugins:
      - fragment-matcher
    config:
      apolloClientVersion: 3

  apps/web/src/types.generated.ts:
    plugins:
      - typescript

  apps/web/src:
    plugins:
      - typescript-operations
      - typescript-react-apollo
    preset: near-operation-file-preset
    presetConfig:
      extension: .generated.tsx
      baseTypesPath: types.generated.ts
    config:
      gqlImport: "@apollo/client#gql"
